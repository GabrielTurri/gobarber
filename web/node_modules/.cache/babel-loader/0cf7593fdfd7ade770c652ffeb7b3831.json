{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport has from \"lodash-es/has\";\nimport _snakeCase from \"lodash-es/snakeCase\";\nimport _camelCase from \"lodash-es/camelCase\";\nimport mapKeys from \"lodash-es/mapKeys\";\nimport mapValues from \"lodash-es/mapValues\";\nimport { getter } from 'property-expr';\nimport MixedSchema from './mixed';\nimport { object as locale } from './locale.js';\nimport sortFields from './util/sortFields';\nimport sortByKeyOrder from './util/sortByKeyOrder';\nimport inherits from './util/inherits';\nimport runTests from './util/runTests';\n\nvar isObject = function isObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nfunction unknown(ctx, value) {\n  var known = Object.keys(ctx.fields);\n  return Object.keys(value).filter(function (key) {\n    return known.indexOf(key) === -1;\n  });\n}\n\nexport default function ObjectSchema(spec) {\n  var _this2 = this;\n\n  if (!(this instanceof ObjectSchema)) return new ObjectSchema(spec);\n  MixedSchema.call(this, {\n    type: 'object',\n    default: function _default() {\n      var _this = this;\n\n      if (!this._nodes.length) return undefined;\n      var dft = {};\n\n      this._nodes.forEach(function (key) {\n        dft[key] = _this.fields[key].default ? _this.fields[key].getDefault() : undefined;\n      });\n\n      return dft;\n    }\n  });\n  this.fields = Object.create(null);\n  this._sortErrors = sortByKeyOrder([]);\n  this._nodes = [];\n  this._excludedEdges = [];\n  this.withMutation(function () {\n    _this2.transform(function coerce(value) {\n      if (typeof value === 'string') {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {\n          value = null;\n        }\n      }\n\n      if (this.isType(value)) return value;\n      return null;\n    });\n\n    if (spec) {\n      _this2.shape(spec);\n    }\n  });\n}\ninherits(ObjectSchema, MixedSchema, {\n  _typeCheck: function _typeCheck(value) {\n    return isObject(value) || typeof value === 'function';\n  },\n  _cast: function _cast(_value, options) {\n    var _this3 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var value = MixedSchema.prototype._cast.call(this, _value); //should ignore nulls here\n\n\n    if (value === undefined) return this.getDefault();\n    if (!this._typeCheck(value)) return value;\n    var fields = this.fields;\n    var strip = this._option('stripUnknown', options) === true;\n\n    var props = this._nodes.concat(Object.keys(value).filter(function (v) {\n      return _this3._nodes.indexOf(v) === -1;\n    }));\n\n    var intermediateValue = {}; // is filled during the transform below\n\n    var innerOptions = _extends({}, options, {\n      parent: intermediateValue,\n      __validating: options.__validating || false\n    });\n\n    var isChanged = false;\n\n    for (var _iterator = _createForOfIteratorHelperLoose(props), _step; !(_step = _iterator()).done;) {\n      var prop = _step.value;\n      var field = fields[prop];\n      var exists = has(value, prop);\n\n      if (field) {\n        var fieldValue = void 0;\n        var strict = field._options && field._options.strict; // safe to mutate since this is fired in sequence\n\n        innerOptions.path = (options.path ? options.path + \".\" : '') + prop;\n        innerOptions.value = value[prop];\n        field = field.resolve(innerOptions);\n\n        if (field._strip === true) {\n          isChanged = isChanged || prop in value;\n          continue;\n        }\n\n        fieldValue = !options.__validating || !strict ? field.cast(value[prop], innerOptions) : value[prop];\n\n        if (fieldValue !== undefined) {\n          intermediateValue[prop] = fieldValue;\n        }\n      } else if (exists && !strip) {\n        intermediateValue[prop] = value[prop];\n      }\n\n      if (intermediateValue[prop] !== value[prop]) {\n        isChanged = true;\n      }\n    }\n\n    return isChanged ? intermediateValue : value;\n  },\n\n  /**\n   * @typedef {Object} Ancestor\n   * @property {Object} schema - a string property of SpecialType\n   * @property {*} value - a number property of SpecialType\n   */\n\n  /**\n   *\n   * @param {*} _value\n   * @param {Object}       opts\n   * @param {string=}      opts.path\n   * @param {*=}           opts.parent\n   * @param {Object=}      opts.context\n   * @param {boolean=}     opts.sync\n   * @param {boolean=}     opts.stripUnknown\n   * @param {boolean=}     opts.strict\n   * @param {boolean=}     opts.recursive\n   * @param {boolean=}     opts.abortEarly\n   * @param {boolean=}     opts.__validating\n   * @param {Object=}      opts.originalValue\n   * @param {Ancestor[]=}  opts.from\n   * @param {Object}       [opts.from]\n   * @param {Function}     callback\n   */\n  _validate: function _validate(_value, opts, callback) {\n    var _this4 = this;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var errors = [];\n    var _opts = opts,\n        sync = _opts.sync,\n        _opts$from = _opts.from,\n        from = _opts$from === void 0 ? [] : _opts$from,\n        _opts$originalValue = _opts.originalValue,\n        originalValue = _opts$originalValue === void 0 ? _value : _opts$originalValue,\n        _opts$abortEarly = _opts.abortEarly,\n        abortEarly = _opts$abortEarly === void 0 ? this._options.abortEarly : _opts$abortEarly,\n        _opts$recursive = _opts.recursive,\n        recursive = _opts$recursive === void 0 ? this._options.recursive : _opts$recursive;\n    from = [{\n      schema: this,\n      value: originalValue\n    }].concat(from); // this flag is needed for handling `strict` correctly in the context of\n    // validation vs just casting. e.g strict() on a field is only used when validating\n\n    opts.__validating = true;\n    opts.originalValue = originalValue;\n    opts.from = from;\n\n    MixedSchema.prototype._validate.call(this, _value, opts, function (err, value) {\n      if (err) {\n        if (abortEarly) return void callback(err);\n        errors.push(err);\n        value = err.value;\n      }\n\n      if (!recursive || !isObject(value)) {\n        callback(errors[0] || null, value);\n        return;\n      }\n\n      originalValue = originalValue || value;\n\n      var tests = _this4._nodes.map(function (key) {\n        return function (_, cb) {\n          var path = key.indexOf('.') === -1 ? (opts.path ? opts.path + \".\" : '') + key : (opts.path || '') + \"[\\\"\" + key + \"\\\"]\";\n          var field = _this4.fields[key];\n\n          if (field && field.validate) {\n            field.validate(value[key], _extends({}, opts, {\n              path: path,\n              from: from,\n              // inner fields are always strict:\n              // 1. this isn't strict so the casting will also have cast inner values\n              // 2. this is strict in which case the nested values weren't cast either\n              strict: true,\n              parent: value,\n              originalValue: originalValue[key]\n            }), cb);\n            return;\n          }\n\n          cb(null);\n        };\n      });\n\n      runTests({\n        sync: sync,\n        tests: tests,\n        value: value,\n        errors: errors,\n        endEarly: abortEarly,\n        sort: _this4._sortErrors,\n        path: opts.path\n      }, callback);\n    });\n  },\n  concat: function concat(schema) {\n    var next = MixedSchema.prototype.concat.call(this, schema);\n    next._nodes = sortFields(next.fields, next._excludedEdges);\n    return next;\n  },\n  shape: function shape(schema, excludes) {\n    if (excludes === void 0) {\n      excludes = [];\n    }\n\n    var next = this.clone();\n\n    var fields = _extends(next.fields, schema);\n\n    next.fields = fields;\n    next._sortErrors = sortByKeyOrder(Object.keys(fields));\n\n    if (excludes.length) {\n      if (!Array.isArray(excludes[0])) excludes = [excludes];\n      var keys = excludes.map(function (_ref) {\n        var first = _ref[0],\n            second = _ref[1];\n        return first + \"-\" + second;\n      });\n      next._excludedEdges = next._excludedEdges.concat(keys);\n    }\n\n    next._nodes = sortFields(fields, next._excludedEdges);\n    return next;\n  },\n  pick: function pick(keys) {\n    var picked = {};\n\n    for (var _iterator2 = _createForOfIteratorHelperLoose(keys), _step2; !(_step2 = _iterator2()).done;) {\n      var key = _step2.value;\n      if (this.fields[key]) picked[key] = this.fields[key];\n    }\n\n    return this.clone().withMutation(function (next) {\n      next.fields = {};\n      return next.shape(picked);\n    });\n  },\n  omit: function omit(keys) {\n    var next = this.clone();\n    var fields = next.fields;\n    next.fields = {};\n\n    for (var _iterator3 = _createForOfIteratorHelperLoose(keys), _step3; !(_step3 = _iterator3()).done;) {\n      var key = _step3.value;\n      delete fields[key];\n    }\n\n    return next.withMutation(function (next) {\n      return next.shape(fields);\n    });\n  },\n  from: function from(_from, to, alias) {\n    var fromGetter = getter(_from, true);\n    return this.transform(function (obj) {\n      if (obj == null) return obj;\n      var newObj = obj;\n\n      if (has(obj, _from)) {\n        newObj = _extends({}, obj);\n        if (!alias) delete newObj[_from];\n        newObj[to] = fromGetter(obj);\n      }\n\n      return newObj;\n    });\n  },\n  noUnknown: function noUnknown(noAllow, message) {\n    if (noAllow === void 0) {\n      noAllow = true;\n    }\n\n    if (message === void 0) {\n      message = locale.noUnknown;\n    }\n\n    if (typeof noAllow === 'string') {\n      message = noAllow;\n      noAllow = true;\n    }\n\n    var next = this.test({\n      name: 'noUnknown',\n      exclusive: true,\n      message: message,\n      test: function test(value) {\n        if (value == null) return true;\n        var unknownKeys = unknown(this.schema, value);\n        return !noAllow || unknownKeys.length === 0 || this.createError({\n          params: {\n            unknown: unknownKeys.join(', ')\n          }\n        });\n      }\n    });\n    next._options.stripUnknown = noAllow;\n    return next;\n  },\n  unknown: function unknown(allow, message) {\n    if (allow === void 0) {\n      allow = true;\n    }\n\n    if (message === void 0) {\n      message = locale.noUnknown;\n    }\n\n    return this.noUnknown(!allow, message);\n  },\n  transformKeys: function transformKeys(fn) {\n    return this.transform(function (obj) {\n      return obj && mapKeys(obj, function (_, key) {\n        return fn(key);\n      });\n    });\n  },\n  camelCase: function camelCase() {\n    return this.transformKeys(_camelCase);\n  },\n  snakeCase: function snakeCase() {\n    return this.transformKeys(_snakeCase);\n  },\n  constantCase: function constantCase() {\n    return this.transformKeys(function (key) {\n      return _snakeCase(key).toUpperCase();\n    });\n  },\n  describe: function describe() {\n    var base = MixedSchema.prototype.describe.call(this);\n    base.fields = mapValues(this.fields, function (value) {\n      return value.describe();\n    });\n    return base;\n  }\n});","map":{"version":3,"sources":["/home/turri/www/gobarber/web/node_modules/yup/es/object.js"],"names":["_extends","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","next","bind","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","has","_snakeCase","_camelCase","mapKeys","mapValues","getter","MixedSchema","object","locale","sortFields","sortByKeyOrder","inherits","runTests","isObject","obj","unknown","ctx","known","keys","fields","filter","key","indexOf","ObjectSchema","spec","_this2","type","default","_default","_this","_nodes","undefined","dft","forEach","getDefault","create","_sortErrors","_excludedEdges","withMutation","transform","coerce","JSON","parse","err","isType","shape","_typeCheck","_cast","_value","options","_this3","strip","_option","props","concat","v","intermediateValue","innerOptions","parent","__validating","isChanged","_iterator","_step","prop","field","exists","fieldValue","strict","_options","path","resolve","_strip","cast","_validate","opts","callback","_this4","errors","_opts","sync","_opts$from","_opts$originalValue","originalValue","_opts$abortEarly","abortEarly","_opts$recursive","recursive","schema","push","tests","map","_","cb","validate","endEarly","sort","excludes","clone","_ref","first","second","pick","picked","_iterator2","_step2","omit","_iterator3","_step3","_from","to","alias","fromGetter","newObj","noUnknown","noAllow","message","exclusive","unknownKeys","createError","params","join","stripUnknown","allow","transformKeys","fn","camelCase","snakeCase","constantCase","toUpperCase","describe","base"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport has from \"lodash-es/has\";\nimport _snakeCase from \"lodash-es/snakeCase\";\nimport _camelCase from \"lodash-es/camelCase\";\nimport mapKeys from \"lodash-es/mapKeys\";\nimport mapValues from \"lodash-es/mapValues\";\nimport { getter } from 'property-expr';\nimport MixedSchema from './mixed';\nimport { object as locale } from './locale.js';\nimport sortFields from './util/sortFields';\nimport sortByKeyOrder from './util/sortByKeyOrder';\nimport inherits from './util/inherits';\nimport runTests from './util/runTests';\n\nvar isObject = function isObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nfunction unknown(ctx, value) {\n  var known = Object.keys(ctx.fields);\n  return Object.keys(value).filter(function (key) {\n    return known.indexOf(key) === -1;\n  });\n}\n\nexport default function ObjectSchema(spec) {\n  var _this2 = this;\n\n  if (!(this instanceof ObjectSchema)) return new ObjectSchema(spec);\n  MixedSchema.call(this, {\n    type: 'object',\n    default: function _default() {\n      var _this = this;\n\n      if (!this._nodes.length) return undefined;\n      var dft = {};\n\n      this._nodes.forEach(function (key) {\n        dft[key] = _this.fields[key].default ? _this.fields[key].getDefault() : undefined;\n      });\n\n      return dft;\n    }\n  });\n  this.fields = Object.create(null);\n  this._sortErrors = sortByKeyOrder([]);\n  this._nodes = [];\n  this._excludedEdges = [];\n  this.withMutation(function () {\n    _this2.transform(function coerce(value) {\n      if (typeof value === 'string') {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {\n          value = null;\n        }\n      }\n\n      if (this.isType(value)) return value;\n      return null;\n    });\n\n    if (spec) {\n      _this2.shape(spec);\n    }\n  });\n}\ninherits(ObjectSchema, MixedSchema, {\n  _typeCheck: function _typeCheck(value) {\n    return isObject(value) || typeof value === 'function';\n  },\n  _cast: function _cast(_value, options) {\n    var _this3 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var value = MixedSchema.prototype._cast.call(this, _value); //should ignore nulls here\n\n\n    if (value === undefined) return this.getDefault();\n    if (!this._typeCheck(value)) return value;\n    var fields = this.fields;\n    var strip = this._option('stripUnknown', options) === true;\n\n    var props = this._nodes.concat(Object.keys(value).filter(function (v) {\n      return _this3._nodes.indexOf(v) === -1;\n    }));\n\n    var intermediateValue = {}; // is filled during the transform below\n\n    var innerOptions = _extends({}, options, {\n      parent: intermediateValue,\n      __validating: options.__validating || false\n    });\n\n    var isChanged = false;\n\n    for (var _iterator = _createForOfIteratorHelperLoose(props), _step; !(_step = _iterator()).done;) {\n      var prop = _step.value;\n      var field = fields[prop];\n      var exists = has(value, prop);\n\n      if (field) {\n        var fieldValue = void 0;\n        var strict = field._options && field._options.strict; // safe to mutate since this is fired in sequence\n\n        innerOptions.path = (options.path ? options.path + \".\" : '') + prop;\n        innerOptions.value = value[prop];\n        field = field.resolve(innerOptions);\n\n        if (field._strip === true) {\n          isChanged = isChanged || prop in value;\n          continue;\n        }\n\n        fieldValue = !options.__validating || !strict ? field.cast(value[prop], innerOptions) : value[prop];\n\n        if (fieldValue !== undefined) {\n          intermediateValue[prop] = fieldValue;\n        }\n      } else if (exists && !strip) {\n        intermediateValue[prop] = value[prop];\n      }\n\n      if (intermediateValue[prop] !== value[prop]) {\n        isChanged = true;\n      }\n    }\n\n    return isChanged ? intermediateValue : value;\n  },\n\n  /**\n   * @typedef {Object} Ancestor\n   * @property {Object} schema - a string property of SpecialType\n   * @property {*} value - a number property of SpecialType\n   */\n\n  /**\n   *\n   * @param {*} _value\n   * @param {Object}       opts\n   * @param {string=}      opts.path\n   * @param {*=}           opts.parent\n   * @param {Object=}      opts.context\n   * @param {boolean=}     opts.sync\n   * @param {boolean=}     opts.stripUnknown\n   * @param {boolean=}     opts.strict\n   * @param {boolean=}     opts.recursive\n   * @param {boolean=}     opts.abortEarly\n   * @param {boolean=}     opts.__validating\n   * @param {Object=}      opts.originalValue\n   * @param {Ancestor[]=}  opts.from\n   * @param {Object}       [opts.from]\n   * @param {Function}     callback\n   */\n  _validate: function _validate(_value, opts, callback) {\n    var _this4 = this;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var errors = [];\n    var _opts = opts,\n        sync = _opts.sync,\n        _opts$from = _opts.from,\n        from = _opts$from === void 0 ? [] : _opts$from,\n        _opts$originalValue = _opts.originalValue,\n        originalValue = _opts$originalValue === void 0 ? _value : _opts$originalValue,\n        _opts$abortEarly = _opts.abortEarly,\n        abortEarly = _opts$abortEarly === void 0 ? this._options.abortEarly : _opts$abortEarly,\n        _opts$recursive = _opts.recursive,\n        recursive = _opts$recursive === void 0 ? this._options.recursive : _opts$recursive;\n    from = [{\n      schema: this,\n      value: originalValue\n    }].concat(from); // this flag is needed for handling `strict` correctly in the context of\n    // validation vs just casting. e.g strict() on a field is only used when validating\n\n    opts.__validating = true;\n    opts.originalValue = originalValue;\n    opts.from = from;\n\n    MixedSchema.prototype._validate.call(this, _value, opts, function (err, value) {\n      if (err) {\n        if (abortEarly) return void callback(err);\n        errors.push(err);\n        value = err.value;\n      }\n\n      if (!recursive || !isObject(value)) {\n        callback(errors[0] || null, value);\n        return;\n      }\n\n      originalValue = originalValue || value;\n\n      var tests = _this4._nodes.map(function (key) {\n        return function (_, cb) {\n          var path = key.indexOf('.') === -1 ? (opts.path ? opts.path + \".\" : '') + key : (opts.path || '') + \"[\\\"\" + key + \"\\\"]\";\n          var field = _this4.fields[key];\n\n          if (field && field.validate) {\n            field.validate(value[key], _extends({}, opts, {\n              path: path,\n              from: from,\n              // inner fields are always strict:\n              // 1. this isn't strict so the casting will also have cast inner values\n              // 2. this is strict in which case the nested values weren't cast either\n              strict: true,\n              parent: value,\n              originalValue: originalValue[key]\n            }), cb);\n            return;\n          }\n\n          cb(null);\n        };\n      });\n\n      runTests({\n        sync: sync,\n        tests: tests,\n        value: value,\n        errors: errors,\n        endEarly: abortEarly,\n        sort: _this4._sortErrors,\n        path: opts.path\n      }, callback);\n    });\n  },\n  concat: function concat(schema) {\n    var next = MixedSchema.prototype.concat.call(this, schema);\n    next._nodes = sortFields(next.fields, next._excludedEdges);\n    return next;\n  },\n  shape: function shape(schema, excludes) {\n    if (excludes === void 0) {\n      excludes = [];\n    }\n\n    var next = this.clone();\n\n    var fields = _extends(next.fields, schema);\n\n    next.fields = fields;\n    next._sortErrors = sortByKeyOrder(Object.keys(fields));\n\n    if (excludes.length) {\n      if (!Array.isArray(excludes[0])) excludes = [excludes];\n      var keys = excludes.map(function (_ref) {\n        var first = _ref[0],\n            second = _ref[1];\n        return first + \"-\" + second;\n      });\n      next._excludedEdges = next._excludedEdges.concat(keys);\n    }\n\n    next._nodes = sortFields(fields, next._excludedEdges);\n    return next;\n  },\n  pick: function pick(keys) {\n    var picked = {};\n\n    for (var _iterator2 = _createForOfIteratorHelperLoose(keys), _step2; !(_step2 = _iterator2()).done;) {\n      var key = _step2.value;\n      if (this.fields[key]) picked[key] = this.fields[key];\n    }\n\n    return this.clone().withMutation(function (next) {\n      next.fields = {};\n      return next.shape(picked);\n    });\n  },\n  omit: function omit(keys) {\n    var next = this.clone();\n    var fields = next.fields;\n    next.fields = {};\n\n    for (var _iterator3 = _createForOfIteratorHelperLoose(keys), _step3; !(_step3 = _iterator3()).done;) {\n      var key = _step3.value;\n      delete fields[key];\n    }\n\n    return next.withMutation(function (next) {\n      return next.shape(fields);\n    });\n  },\n  from: function from(_from, to, alias) {\n    var fromGetter = getter(_from, true);\n    return this.transform(function (obj) {\n      if (obj == null) return obj;\n      var newObj = obj;\n\n      if (has(obj, _from)) {\n        newObj = _extends({}, obj);\n        if (!alias) delete newObj[_from];\n        newObj[to] = fromGetter(obj);\n      }\n\n      return newObj;\n    });\n  },\n  noUnknown: function noUnknown(noAllow, message) {\n    if (noAllow === void 0) {\n      noAllow = true;\n    }\n\n    if (message === void 0) {\n      message = locale.noUnknown;\n    }\n\n    if (typeof noAllow === 'string') {\n      message = noAllow;\n      noAllow = true;\n    }\n\n    var next = this.test({\n      name: 'noUnknown',\n      exclusive: true,\n      message: message,\n      test: function test(value) {\n        if (value == null) return true;\n        var unknownKeys = unknown(this.schema, value);\n        return !noAllow || unknownKeys.length === 0 || this.createError({\n          params: {\n            unknown: unknownKeys.join(', ')\n          }\n        });\n      }\n    });\n    next._options.stripUnknown = noAllow;\n    return next;\n  },\n  unknown: function unknown(allow, message) {\n    if (allow === void 0) {\n      allow = true;\n    }\n\n    if (message === void 0) {\n      message = locale.noUnknown;\n    }\n\n    return this.noUnknown(!allow, message);\n  },\n  transformKeys: function transformKeys(fn) {\n    return this.transform(function (obj) {\n      return obj && mapKeys(obj, function (_, key) {\n        return fn(key);\n      });\n    });\n  },\n  camelCase: function camelCase() {\n    return this.transformKeys(_camelCase);\n  },\n  snakeCase: function snakeCase() {\n    return this.transformKeys(_snakeCase);\n  },\n  constantCase: function constantCase() {\n    return this.transformKeys(function (key) {\n      return _snakeCase(key).toUpperCase();\n    });\n  },\n  describe: function describe() {\n    var base = MixedSchema.prototype.describe.call(this);\n    base.fields = mapValues(this.fields, function (value) {\n      return value.describe();\n    });\n    return base;\n  }\n});"]},"metadata":{},"sourceType":"module"}